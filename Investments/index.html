<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LifeOS - Investment Portfolio</title>
    <link rel="stylesheet" href="../shared/styles.css">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container investment-page">
        <div class="investment-header">
            <div>
                <h1>üìà LifeOS Investments</h1>
                <div class="subtitle">Track portfolio and research opportunities</div>
            </div>
            <div class="nav-tabs">
                <button class="nav-tab active" onclick="switchTab('dashboard')">Dashboard</button>
                <button class="nav-tab" onclick="switchTab('portfolio')">Portfolio</button>
                <button class="nav-tab" onclick="switchTab('dividends')">Dividends</button>
                <button class="nav-tab" onclick="switchTab('cash')">Cash & Interest</button>
                <button class="nav-tab" onclick="switchTab('research')">Research</button>
            </div>
        </div>

        <!-- Dashboard Tab -->
        <div id="dashboard-tab" class="tab-content active">
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-value" id="portfolio-value">$0.00</div>
                    <div class="stat-label">Portfolio Value</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="unrealized-gain">$0.00</div>
                    <div class="stat-label">Unrealized Gain/Loss</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="realized-gain">$0.00</div>
                    <div class="stat-label">Realized Gain/Loss</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="total-dividends">$0.00</div>
                    <div class="stat-label">Total Dividends</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="total-interest">$0.00</div>
                    <div class="stat-label">Total Interest</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="cash-balance">$0.00</div>
                    <div class="stat-label">Cash Balance</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="holdings-count">0</div>
                    <div class="stat-label">Unique Symbols</div>
                </div>
            </div>

            <div class="investment-content">
                <div class="investment-card">
                    <h2>üìä Portfolio Allocation</h2>
                    <div id="allocation"></div>
                </div>

                <div class="investment-card">
                    <h2>üìù Recent Activity</h2>
                    <div id="recent-activity"></div>
                </div>
            </div>
        </div>

        <!-- Portfolio Tab -->
        <div id="portfolio-tab" class="tab-content">
            <div class="investment-content full-width" style="grid-template-columns: 1fr;">
                <div class="investment-card">
                    <h2>‚ûï Add Holding</h2>
                    <form id="holding-form">
                        <div class="form-group">
                            <label>Symbol (e.g., AAPL, SPY)</label>
                            <div style="display: flex; gap: 10px;">
                                <input type="text" id="holding-symbol" placeholder="Stock/ETF symbol" required style="flex: 1;">
                                <button type="button" id="lookup-btn" class="investment-btn" style="width: auto; margin: 0; padding: 10px 20px;">Lookup</button>
                            </div>
                            <div id="lookup-status" style="font-size: 12px; margin-top: 5px; color: #666;"></div>
                        </div>

                        <div class="form-group">
                            <label>Name</label>
                            <input type="text" id="holding-name" placeholder="Company or Fund name" required>
                        </div>

                        <div class="form-group">
                            <label>Type</label>
                            <select id="holding-type" required>
                                <option value="Stock">Stock</option>
                                <option value="ETF">ETF</option>
                                <option value="Mutual Fund">Mutual Fund</option>
                                <option value="Bond">Bond</option>
                                <option value="Crypto">Cryptocurrency</option>
                                <option value="Other">Other</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label>Lot Type</label>
                            <select id="lot-type" required>
                                <option value="Purchase">Purchase</option>
                                <option value="DRIP">DRIP (Dividend Reinvestment)</option>
                                <option value="Other">Other</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label>Quantity (Shares/Units)</label>
                            <input type="number" id="holding-quantity" placeholder="Number of shares/units" required min="0.01" step="0.0001">
                        </div>

                        <div class="form-group">
                            <label>Purchase/Acquisition Price per Share</label>
                            <input type="number" id="purchase-price" placeholder="0.00" required min="0" step="0.01">
                        </div>

                        <div class="form-group">
                            <label>Current Price per Share</label>
                            <input type="number" id="current-price" placeholder="0.00" required min="0" step="0.01">
                        </div>

                        <div class="form-group">
                            <label>Acquisition Date</label>
                            <input type="date" id="purchase-date" required>
                        </div>

                        <div class="form-group">
                            <label>Sold Shares (for realized gains)</label>
                            <input type="number" id="sold-shares" placeholder="0" min="0" step="0.0001" value="0">
                        </div>

                        <div class="form-group">
                            <label>Sold Price per Share (if sold)</label>
                            <input type="number" id="sold-price" placeholder="0.00" min="0" step="0.01" value="0">
                        </div>

                        <div class="form-group">
                            <label>Notes (Optional)</label>
                            <textarea id="holding-notes" placeholder="Any notes about this holding..."></textarea>
                        </div>

                        <button type="submit" class="investment-btn">Add Holding</button>
                    </form>
                </div>
            </div>

            <div class="investment-content">
                <div class="investment-card full-width">
                    <h2>üíº Your Holdings</h2>
                    <div class="portfolio-list" id="portfolio-list"></div>
                </div>
            </div>
        </div>

        <!-- Dividends Tab -->
        <div id="dividends-tab" class="tab-content">
            <div class="investment-content full-width" style="grid-template-columns: 1fr;">
                <div class="investment-card">
                    <h2>üí∞ Record Dividend</h2>
                    <form id="dividend-form">
                        <div class="form-group">
                            <label>Symbol</label>
                            <div style="display: flex; gap: 10px;">
                                <input type="text" id="dividend-symbol" placeholder="e.g., AAPL" required style="flex: 1;">
                                <button type="button" id="dividend-lookup-btn" class="investment-btn" style="width: auto; margin: 0; padding: 10px 20px;">Lookup</button>
                            </div>
                            <div id="dividend-lookup-status" style="font-size: 12px; margin-top: 5px; color: #666;"></div>
                        </div>

                        <div class="form-group">
                            <label>Dividend Amount Received</label>
                            <input type="number" id="dividend-amount" placeholder="Total amount received" required min="0" step="0.01">
                        </div>

                        <div class="form-group">
                            <label>Dividend Per Share</label>
                            <input type="number" id="dividend-per-share" placeholder="0.0000" required min="0" step="0.0001">
                        </div>

                        <div class="form-group">
                            <label>Payment Date</label>
                            <input type="date" id="dividend-date" required>
                        </div>

                        <div class="form-group">
                            <label>Notes (Optional)</label>
                            <textarea id="dividend-notes" placeholder="Dividend type, record date, etc..."></textarea>
                        </div>

                        <button type="submit" class="investment-btn">Record Dividend</button>
                    </form>
                </div>
            </div>

            <div class="investment-content">
                <div class="investment-card">
                    <h2>üìä Monthly Dividend Summary</h2>
                    <div id="monthly-dividends"></div>
                </div>

                <div class="investment-card">
                    <h2>üíµ Shares Received from Dividends</h2>
                    <div id="drip-summary"></div>
                </div>
            </div>

            <div class="investment-content">
                <div class="investment-card full-width">
                    <h2>üìã Dividend History</h2>
                    <div id="dividends-list"></div>
                </div>
            </div>
        </div>

        <!-- Cash & Interest Tab -->
        <div id="cash-tab" class="tab-content">
            <div class="investment-content full-width" style="grid-template-columns: 1fr;">
                <div class="investment-card">
                    <h2>üí∞ Manage Cash Position</h2>
                    <form id="cash-form">
                        <div class="form-group">
                            <label>Cash Balance</label>
                            <input type="number" id="cash-amount" placeholder="0.00" required min="0" step="0.01">
                        </div>

                        <div class="form-group">
                            <label>Notes (Optional)</label>
                            <textarea id="cash-notes" placeholder="e.g., Savings account, money market, etc..."></textarea>
                        </div>

                        <button type="submit" class="investment-btn">Update Cash Balance</button>
                    </form>
                </div>
            </div>

            <div class="investment-content full-width" style="grid-template-columns: 1fr;">
                <div class="investment-card">
                    <h2>üè¶ Record Interest Income</h2>
                    <form id="interest-form">
                        <div class="form-group">
                            <label>Interest Amount</label>
                            <input type="number" id="interest-amount" placeholder="0.00" required min="0" step="0.01">
                        </div>

                        <div class="form-group">
                            <label>Source</label>
                            <input type="text" id="interest-source" placeholder="e.g., Savings Account, CD, Bonds" required>
                        </div>

                        <div class="form-group">
                            <label>Date Received</label>
                            <input type="date" id="interest-date" required>
                        </div>

                        <div class="form-group">
                            <label>Notes (Optional)</label>
                            <textarea id="interest-notes" placeholder="Additional details..."></textarea>
                        </div>

                        <button type="submit" class="investment-btn">Record Interest</button>
                    </form>
                </div>
            </div>

            <div class="investment-content">
                <div class="investment-card full-width">
                    <h2>üìä Interest History</h2>
                    <div id="interest-list"></div>
                </div>
            </div>
        </div>

        <!-- Research Tab -->
        <div id="research-tab" class="tab-content">
            <div class="investment-content full-width" style="grid-template-columns: 1fr;">
                <div class="investment-card">
                    <h2>üî¨ Add Research Entry</h2>
                    <form id="research-form">
                        <div class="form-group">
                            <label>Symbol</label>
                            <div style="display: flex; gap: 10px;">
                                <input type="text" id="research-symbol" placeholder="e.g., AAPL, SPY" required style="flex: 1;">
                                <button type="button" id="research-lookup-btn" class="investment-btn" style="width: auto; margin: 0; padding: 10px 20px;">Lookup</button>
                            </div>
                            <div id="research-lookup-status" style="font-size: 12px; margin-top: 5px; color: #666;"></div>
                        </div>

                        <div class="form-group">
                            <label>Name</label>
                            <input type="text" id="research-name" placeholder="Company or Fund name" required>
                        </div>

                        <div class="form-group">
                            <label>Type</label>
                            <select id="research-type" required>
                                <option value="Stock">Stock</option>
                                <option value="ETF">ETF</option>
                                <option value="Mutual Fund">Mutual Fund</option>
                                <option value="Bond">Bond</option>
                                <option value="Crypto">Cryptocurrency</option>
                                <option value="Other">Other</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label>Sector</label>
                            <input type="text" id="research-sector" placeholder="e.g., Technology, Healthcare" required>
                        </div>

                        <div class="form-group">
                            <label>Rating/Grade</label>
                            <select id="research-rating">
                                <option value="">Not Rated</option>
                                <option value="Buy">Buy</option>
                                <option value="Hold">Hold</option>
                                <option value="Sell">Sell</option>
                                <option value="Strong Buy">Strong Buy</option>
                                <option value="Strong Sell">Strong Sell</option>
                                <option value="A">A</option>
                                <option value="B">B</option>
                                <option value="C">C</option>
                                <option value="D">D</option>
                                <option value="F">F</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label>Research Notes</label>
                            <textarea id="research-notes" placeholder="Key findings, analysis, pros/cons..."></textarea>
                        </div>

                        <button type="submit" class="investment-btn">Save Research</button>
                    </form>
                </div>
            </div>

            <div class="investment-content">
                <div class="investment-card full-width">
                    <h2>üìö Research Database</h2>

                    <div class="tabs-row">
                        <button class="tab-button active" data-tab="all">All</button>
                        <button class="tab-button" data-tab="Stock">Stocks</button>
                        <button class="tab-button" data-tab="ETF">ETFs</button>
                        <button class="tab-button" data-tab="Mutual Fund">Funds</button>
                        <button class="tab-button" data-tab="Crypto">Crypto</button>
                    </div>

                    <div id="research-list"></div>
                </div>
            </div>
        </div>
    </div>

    <script src="../shared/storage-utils.js"></script>
    <script src="../shared/theme-manager.js"></script>
    <script src="../shared/data-manager.js"></script>
    <script src="script.js"></script>
</body>
</html>
